<!doctype html>
<html>
<head>
<title>Peyton’s Website Unblocker</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
<base target="_blank">
<style>
    body {
        background-image: url("https://wallpaperaccess.com/full/86289.jpg");
 background-repeat:no-repeat;
 background-size:cover;
} 
{
      padding: 0 0.5em;
    }
    .box {
      margin-top: 1em;
    }
    #txtURL {
      width: 100%;
      height: 2em;
      text-indent: 0.5em;
      padding: 0.25em 0;
    }
    #btnGo {
      width: 100%;
      font-size: 1.5em;
    }
    #list a {
      margin: 1em;
    }


</style>
</head>
<body>
  
  <div class="box">
    <input id="txtURL" placeholder="Enter Link Here Then Press Unblock Website" type="text" value="" autofocus>
  </div>
  <div class="box">
    <button id="btnGo">Unblock Website</button>
  </div>
  <div class="box">
    <span>Switch Mode:</span>
    <select id="selNode"></select>
  </div>
  <div class="box" id="list">
  </div>
  <div>
  <script>
    const PAGE_CONF_SET = 110
    const PAGE_CONF_GET = 111


    const SW_CONF_RETURN = 112
    const SW_CONF_CHANGE = 113


    const PAGE_READY_CHECK = 200
    const SW_READY = 201


    const sw = navigator.serviceWorker




    sw.addEventListener('message', onSwMsg)
    sendMsgToSw(PAGE_READY_CHECK)


    btnGo.onclick = function() {
      const text = txtURL.value.trim()
      if (text) {
        const url = './-----' + text
        open(url, '_blank', 'noopener,noreferrer')
      }
    }
    txtURL.onkeypress = function(e) {
      if (e.keyCode === 13) {
        btnGo.onclick()
      }
    }
    txtURL.setSelectionRange(0, txtURL.value.length)




    function onSwMsg(e) {
      const [cmd, msg] = e.data


      switch (cmd) {
      case SW_CONF_RETURN:
        conf = msg
        showConf()
        break


      case SW_CONF_CHANGE:
        conf = msg
        updateSelected()
        break


      case SW_READY:
        console.log('sw ready')
        showIcons()
        sendMsgToSw(PAGE_CONF_GET)
        break
      }
    }


    function onSwFail(err) {
      txtURL.value = err
    }


    selNode.onchange = function() {
      const item = this.options[this.selectedIndex]
      const node = item.value
      conf.node_default = node
      sendMsgToSw(PAGE_CONF_SET, conf)
    }


    function sendMsgToSw(cmd, val) {
      const ctl = sw.controller
      if (!ctl) {
        console.log('ctl is null')
        return
      }
      ctl.postMessage([cmd, val])
    }


    const SITE_LIST = [
      ['google', 'google.com/'],
      ['youtube', 'youtube.com/'],
      ['twitter', 'twitter.com/'],
      ['flickr', 'flickr.com/'],
      ['quora', 'quora.com/'],
      ['twitch', 'twitch.tv/'],
      ['reddit', 'reddit.com/'],
      ['wiki', 'wikipedia.org/'],
      ['stadia', 'stadia.google.com/'],
      ['facebook', 'facebook.com/'],
      ['blogger', 'blogger.com/'],
    ]


    function showIcons() {
      list.innerHTML = SITE_LIST.map(v => {
        let [id, url] = v
        url = url || `www.${id}.com/`
        return `\
<a rel="noopener noreferrer" href=./-----https://${url}>\
<img width=128 height=128 src=__sys__/assets/ico/${id}.png></a>`
      }).join('')
    }


    function addNodeItem(id, text) {
      const optEl = document.createElement('option')
      optEl.id = '--' + id
      optEl.text = text
      optEl.value = id
      selNode.appendChild(optEl)
    }


    function updateSelected() {
      const id = conf.node_default
      const item = document.getElementById('--' + id)
      if (item) {
        item.selected = true
      } else {
        console.warn('unknown node:', id)
      }
    }


    function showConf() {
      for (const [id, node] of Object.entries(conf.node_map)) {
        if (!node.hidden) {
          addNodeItem(id, node.label)
        }
      }
      updateSelected()
    }
  </script>
  </div>
  <BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR> <BR><BR>


 <footer><font color=”00FF00”>
    <div><center><table><tbody><tr>
    <td><div size="1" face="arial" color="blue" style="font-family:'Courier New'"><center>Helping, Teaching, and Creating
</font>
</font>
<br>  
    Copyright ©2022 <a href="https://www.peytonscarborough01" target="_blank">PeytonScarborough01.</a>   All Rights Reserved. </center></div><br> 
    </td>
    <td>  <div><center>
    <a href="https://clustrmaps.com/site/1bkk4" title="Visit tracker"><img src="//www.png.pngtree.com/png-clipart/20200312/ourlarge/pngtree-maps-icon-design-png-image_2156485.jpg"></a>
  </center></div></td>
    </tr></tbody></table></center></div>




<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5660349373091698"
     crossorigin="anonymous">
</script>  


      
    </footer>
</body>
</html>
